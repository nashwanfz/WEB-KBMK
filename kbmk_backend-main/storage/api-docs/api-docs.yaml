openapi: 3.0.0
info:
  title: 'KBMK UNMUL API Documentation'
  description: 'Dokumentasi API untuk team Frontend'
  contact:
    email: admin@admin.com
  license:
    name: 'Apache 2.0'
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
  version: 1.0.0
servers:
  -
    url: /api
paths:
  /register:
    post:
      tags:
        - Authentication
      summary: 'Mendaftarkan user baru'
      description: 'Endpoint untuk membuat akun user baru'
      operationId: 5d4fa5d5607ed675ba93907e1fc94534
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - username
                - email
                - password
                - password_confirmation
                - roles
              properties:
                username:
                  type: string
                  maxLength: 50
                  example: johndoe
                email:
                  type: string
                  format: email
                  example: johndoe@example.com
                password:
                  type: string
                  minLength: 6
                  example: password123
                password_confirmation:
                  type: string
                  example: password123
                roles:
                  type: string
                  enum:
                    - admin
                    - superadmin
                  example: admin
              type: object
      responses:
        201:
          description: 'Registrasi berhasil'
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: 'Register success!'
                  data:
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
                      token:
                        type: string
                        example: 1|abcdef123456...
                      token_type:
                        type: string
                        example: Bearer
                    type: object
                type: object
        422:
          description: 'Error validasi'
  /login:
    post:
      tags:
        - Authentication
      summary: 'Login user'
      description: 'Mendapatkan token autentikasi'
      operationId: 67d6d0fdd54fba132e1b6f55ca254183
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: johndoe@example.com
                password:
                  type: string
                  example: password123
              type: object
      responses:
        200:
          description: 'Login berhasil'
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: 'Login success!'
                  data:
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
                      token:
                        type: string
                        example: 1|abcdef123456...
                      token_type:
                        type: string
                        example: Bearer
                    type: object
                type: object
        401:
          description: 'Email atau password salah'
  /logout:
    post:
      tags:
        - Authentication
      summary: 'Logout user'
      description: 'Menghapus token autentikasi yang sedang aktif'
      operationId: 28d48c13fca984400ac8de99f54ee13a
      responses:
        200:
          description: 'Logout berhasil'
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: 'Logout success!'
                type: object
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  /me:
    get:
      tags:
        - Authentication
      summary: 'Mendapatkan data user yang sedang login'
      description: 'Mengembalikan data user berdasarkan token yang diberikan'
      operationId: bc2032a379aa97707ccc61511897c120
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: 'User data fetched successfully'
                  data:
                    $ref: '#/components/schemas/User'
                type: object
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  /users/coordinators:
    get:
      tags:
        - Auth
      summary: 'Mendapatkan daftar koordinator'
      description: "Endpoint untuk mengambil semua user dengan role 'koordinator'"
      operationId: 013aba22397c94fc1fb97e804fe62112
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      properties:
                        id:
                          type: integer
                        username:
                          type: string
                        division:
                          properties:
                            id:
                              type: integer
                            nama:
                              type: string
                          type: object
                      type: object
                type: object
      security:
        -
          bearerAuth: []
  /documentations:
    get:
      tags:
        - Documentations
      summary: 'Menampilkan daftar dokumentasi (dengan paginasi)'
      operationId: 5fc3487a79802a1975f5658b46bd9691
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Documentation'
                  links:
                    type: object
                  meta:
                    type: object
                type: object
    post:
      tags:
        - Documentations
      summary: 'Menambah dokumentasi baru'
      description: "Memerlukan autentikasi dan role 'admin'. Mengupload foto."
      operationId: b518a17518d679c1381e7b7c593b3610
      requestBody:
        content:
          multipart/form-data:
            schema:
              required:
                - nama
                - deskripsi
                - tanggal
                - lokasi
                - foto
              properties:
                nama:
                  type: string
                  maxLength: 50
                deskripsi:
                  type: string
                tanggal:
                  type: string
                  format: date
                lokasi:
                  type: string
                  maxLength: 255
                foto:
                  type: string
                  format: binary
              type: object
      responses:
        201:
          description: 'Berhasil dibuat'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Documentation'
                type: object
        422:
          description: 'Error validasi'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  '/documentations/{id}':
    get:
      tags:
        - Documentations
      summary: 'Menampilkan detail dokumentasi'
      operationId: 8f92160da5af359f5035faf9e348fd11
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Documentation'
                type: object
        404:
          description: 'Not found'
    put:
      tags:
        - Documentations
      summary: 'Memperbarui dokumentasi'
      description: "Memerlukan autentikasi dan role 'admin'. Dapat mengganti foto."
      operationId: 387dd643b5fadd1e031c0a3710038b90
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                nama:
                  type: string
                  maxLength: 50
                deskripsi:
                  type: string
                tanggal:
                  type: string
                  format: date
                lokasi:
                  type: string
                  maxLength: 255
                foto:
                  type: string
                  format: binary
              type: object
      responses:
        200:
          description: 'Berhasil diperbarui'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Documentation'
                type: object
        404:
          description: 'Not found'
        422:
          description: 'Error validasi'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Documentations
      summary: 'Menghapus dokumentasi'
      description: "Memerlukan autentikasi dan role 'admin'"
      operationId: 9f58ce8dc08de6bcfc6ee100121cae99
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 'Berhasil dihapus'
        404:
          description: 'Not found'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  /links:
    get:
      tags:
        - Link
      summary: 'Menampilkan daftar link'
      description: 'Endpoint publik untuk melihat semua link.'
      operationId: a4cdfccec2072bff462ecc4a12651ca1
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Link'
                type: object
    post:
      tags:
        - Link
      summary: 'Menambah link baru'
      description: "Memerlukan autentikasi dan role 'admin' atau 'superadmin'."
      operationId: 473714d8872dd56ff0565acb7d029ec6
      requestBody:
        content:
          application/json:
            schema:
              required:
                - nama
                - link
              properties:
                nama:
                  type: string
                  maxLength: 255
                  example: 'Link GForm'
                link:
                  type: string
                  format: uri
                  example: 'https://forms.gle/xyz'
              type: object
      responses:
        201:
          description: 'Link berhasil dibuat'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Link'
                type: object
        422:
          description: 'Error validasi'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  '/links/{id}':
    get:
      tags:
        - Link
      summary: 'Menampilkan detail link'
      description: 'Endpoint publik untuk melihat detail satu link.'
      operationId: 1140569bb06802b6bda1e8aa3f5f8c89
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Link'
                type: object
        404:
          description: 'Not found'
    put:
      tags:
        - Link
      summary: 'Memperbarui link'
      description: "Memerlukan autentikasi dan role 'admin' atau 'superadmin'."
      operationId: e26b4a1a2fb44a2e0e00ec2aaa28c956
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              properties:
                nama:
                  type: string
                  maxLength: 255
                  example: 'Link GForm Baru'
                link:
                  type: string
                  format: uri
                  example: 'https://forms.gle/abc'
              type: object
      responses:
        200:
          description: 'Link berhasil diperbarui'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Link'
                type: object
        404:
          description: 'Not found'
        422:
          description: 'Error validasi'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Link
      summary: 'Menghapus link'
      description: "Memerlukan autentikasi dan role 'admin' atau 'superadmin'."
      operationId: 8d796148b9d641c83be0a2dce357936d
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 'Link berhasil dihapus'
        404:
          description: 'Not found'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  /pengurus:
    get:
      tags:
        - Pengurus
      summary: 'Menampilkan daftar pengurus'
      description: 'Endpoint publik untuk melihat data pengurus beserta divisinya'
      operationId: dd0c963df2fbd708d870a14e100b0771
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Pengurus'
                type: object
    post:
      tags:
        - Pengurus
      summary: 'Menambah data pengurus baru'
      description: "Memerlukan autentikasi dan role 'superadmin'. Mengupload foto."
      operationId: 62cfbffccfec4a9851a0080338b7c193
      requestBody:
        content:
          multipart/form-data:
            schema:
              required:
                - nama
                - division_id
                - deskripsi
              properties:
                nama:
                  type: string
                  maxLength: 50
                jabatan:
                  type: string
                  maxLength: 100
                division_id:
                  description: 'ID dari tabel divisions'
                  type: integer
                foto:
                  type: string
                  format: binary
                deskripsi:
                  type: string
              type: object
      responses:
        201:
          description: 'Berhasil dibuat'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Pengurus'
                type: object
        422:
          description: 'Error validasi'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  '/pengurus/{id}':
    get:
      tags:
        - Pengurus
      summary: 'Menampilkan detail pengurus'
      description: 'Endpoint publik untuk melihat detail satu pengurus beserta divisinya'
      operationId: 65f820a0ce1cd9573e9aa594a3a916c8
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Pengurus'
                type: object
        404:
          description: 'Not found'
    put:
      tags:
        - Pengurus
      summary: 'Memperbarui data pengurus'
      description: "Memerlukan autentikasi dan role 'superadmin'. Dapat mengganti foto."
      operationId: 6c8813685f7879296fa6933750cb43fa
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                nama:
                  type: string
                  maxLength: 50
                jabatan:
                  type: string
                  maxLength: 100
                division_id:
                  description: 'ID dari tabel divisions'
                  type: integer
                foto:
                  type: string
                  format: binary
                deskripsi:
                  type: string
              type: object
      responses:
        200:
          description: 'Berhasil diperbarui'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Pengurus'
                type: object
        404:
          description: 'Not found'
        422:
          description: 'Error validasi'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Pengurus
      summary: 'Menghapus data pengurus'
      description: "Memerlukan autentikasi dan role 'superadmin'"
      operationId: 5657f94e2df8b95b2e79cda7421b5847
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 'Berhasil dihapus'
        404:
          description: 'Not found'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  /divisions:
    get:
      tags:
        - Pengurus
      summary: 'Menampilkan daftar divisi untuk dropdown'
      description: 'Endpoint publik untuk mengambil semua data divisi. Biasa digunakan untuk mengisi form dropdown pada saat menambah atau mengedit pengurus.'
      operationId: 025c0df797098944ed82c345248980ed
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      properties:
                        id:
                          type: integer
                          example: 1
                        nama:
                          type: string
                          example: Kesekretariatan
                      type: object
                type: object
  /profile-descs:
    get:
      tags:
        - 'Profile Descriptions'
      summary: 'Menampilkan semua deskripsi profil'
      operationId: 0826618d22f0f31b19cf36f31c9e9831
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ProfileDesc'
                type: object
    post:
      tags:
        - 'Profile Descriptions'
      summary: 'Menambah deskripsi profil baru'
      description: "Memerlukan autentikasi dan role 'superadmin'"
      operationId: cf5735bc67e85435efb54d659b4c33ab
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProfileDesc'
      responses:
        201:
          description: 'Berhasil dibuat'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/ProfileDesc'
                type: object
        422:
          description: 'Error validasi'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  '/profile-descs/{id}':
    get:
      tags:
        - 'Profile Descriptions'
      summary: 'Menampilkan detail deskripsi profil'
      operationId: f241d2a528350d8c650c82a31375f9d8
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/ProfileDesc'
                type: object
        404:
          description: 'Not found'
    put:
      tags:
        - 'Profile Descriptions'
      summary: 'Memperbarui deskripsi profil'
      description: "Memerlukan autentikasi dan role 'superadmin'"
      operationId: a6fd4e376899f51fc9dede4d71c97c7e
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                judul:
                  type: string
                  maxLength: 50
                jenis:
                  type: string
                  enum:
                    - about
                    - visi
                    - misi
                deskripsi:
                  type: string
              type: object
      responses:
        200:
          description: 'Berhasil diperbarui'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/ProfileDesc'
                type: object
        404:
          description: 'Not found'
        422:
          description: 'Error validasi'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - 'Profile Descriptions'
      summary: 'Menghapus deskripsi profil'
      description: "Memerlukan autentikasi dan role 'superadmin'"
      operationId: 0b30fae05a4db71cfa8f6ea108ddb779
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 'Berhasil dihapus'
        404:
          description: 'Not found'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  /schedules:
    get:
      tags:
        - Schedules
      summary: 'Menampilkan daftar semua jadwal'
      description: 'Mengembalikan array dari objek jadwal yang diurutkan berdasarkan tanggal'
      operationId: 5c29d50423d0d6b8699a2135c2fb5fb9
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Schedule'
                type: object
    post:
      tags:
        - Schedules
      summary: 'Membuat jadwal baru'
      description: "Memerlukan autentikasi dan role 'superadmin'"
      operationId: 7c01405ac6954959e3e88545b2405603
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Schedule'
      responses:
        201:
          description: 'Jadwal berhasil dibuat'
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: 'Schedule created successfully'
                  data:
                    $ref: '#/components/schemas/Schedule'
                type: object
        422:
          description: 'Error validasi'
          content:
            application/json:
              schema:
                properties:
                  nama:
                    type: array
                    items:
                      type: string
                      example: 'The nama field is required.'
                  tanggal:
                    type: array
                    items:
                      type: string
                type: object
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  '/schedules/{id}':
    get:
      tags:
        - Schedules
      summary: 'Menampilkan detail jadwal berdasarkan ID'
      description: 'Mengembalikan satu objek jadwal'
      operationId: 37e90f6bc49dcc1ff99759cc62146615
      parameters:
        -
          name: id
          in: path
          description: 'ID dari jadwal'
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Schedule'
                type: object
        404:
          description: 'Jadwal tidak ditemukan'
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: 'Schedule not found.'
                type: object
    put:
      tags:
        - Schedules
      summary: 'Memperbarui jadwal'
      description: "Memerlukan autentikasi dan role 'superadmin'"
      operationId: 856d6d9f76c212ceb91643de33238158
      parameters:
        -
          name: id
          in: path
          description: 'ID dari jadwal'
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                nama:
                  type: string
                  maxLength: 50
                tanggal:
                  type: string
                  format: date
                deskripsi:
                  type: string
              type: object
      responses:
        200:
          description: 'Jadwal berhasil diperbarui'
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: 'Schedule updated successfully'
                  data:
                    $ref: '#/components/schemas/Schedule'
                type: object
        404:
          description: 'Schedule not found.'
        422:
          description: 'Error validasi.'
        401:
          description: Unauthorized.
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Schedules
      summary: 'Menghapus jadwal'
      description: "Memerlukan autentikasi dan role 'superadmin'"
      operationId: adcce9884f580db32f049a4d1ce6e71e
      parameters:
        -
          name: id
          in: path
          description: 'ID dari jadwal'
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 'Jadwal berhasil dihapus'
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: 'Schedule deleted successfully.'
                type: object
        404:
          description: 'Schedule not found.'
        401:
          description: Unauthorized.
      security:
        -
          bearerAuth: []
  /surat-outgoing:
    get:
      tags:
        - 'Surat Keluar'
      summary: 'Admin/Superadmin melihat semua surat keluar'
      description: "Memerlukan autentikasi dan role 'admin' atau 'superadmin'."
      operationId: 1979037dede8bc165465cfc17e2e6cf7
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/SuratOutgoing'
                type: object
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
    post:
      tags:
        - 'Surat Keluar'
      summary: 'Admin/Superadmin membuat surat keluar baru'
      description: "Memerlukan autentikasi dan role 'admin' atau 'superadmin'."
      operationId: 0a44d5bb351db98272bb1e3be6c4f3ec
      requestBody:
        content:
          multipart/form-data:
            schema:
              required:
                - perihal
                - tujuan
                - jenis_surat
                - file_surat
              properties:
                perihal:
                  type: string
                  maxLength: 255
                tujuan:
                  type: string
                jenis_surat:
                  type: string
                  maxLength: 255
                file_surat:
                  type: string
                  format: binary
              type: object
      responses:
        201:
          description: 'Surat keluar berhasil dibuat'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/SuratOutgoing'
                type: object
        422:
          description: 'Error validasi'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  '/surat-outgoing/{suratOutgoing}':
    get:
      tags:
        - 'Surat Keluar'
      summary: 'Menampilkan detail surat keluar'
      description: "Memerlukan autentikasi dan role 'admin' atau 'superadmin'."
      operationId: cd955c1b840171e04adbed5b7e7dd180
      parameters:
        -
          name: suratOutgoing
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/SuratOutgoing'
                type: object
        404:
          description: 'Not found'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
    put:
      tags:
        - 'Surat Keluar'
      summary: 'Memperbarui surat keluar'
      description: "Memerlukan autentikasi dan role 'admin' atau 'superadmin'."
      operationId: 9fec1fea252ce64a9f3adb0c2b194c6c
      parameters:
        -
          name: suratOutgoing
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                perihal:
                  type: string
                  maxLength: 255
                tujuan:
                  type: string
                jenis_surat:
                  type: string
                  maxLength: 255
                file_surat:
                  type: string
                  format: binary
              type: object
      responses:
        200:
          description: 'Surat keluar berhasil diperbarui'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/SuratOutgoing'
                type: object
        404:
          description: 'Not found'
        422:
          description: 'Error validasi'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - 'Surat Keluar'
      summary: 'Menghapus surat keluar'
      description: "Memerlukan autentikasi dan role 'admin' atau 'superadmin'."
      operationId: 4f638cb3875098a7472b47d07d2f933f
      parameters:
        -
          name: suratOutgoing
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 'Surat keluar berhasil dihapus'
        404:
          description: 'Not found'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  /surat-requests:
    get:
      tags:
        - 'Surat Masuk'
      summary: 'Admin/Superadmin melihat semua pengajuan surat'
      description: "Memerlukan autentikasi dan role 'admin' atau 'superadmin'."
      operationId: 1b314bac8530369d69d1336fd353858c
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/SuratRequest'
                type: object
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
    post:
      tags:
        - 'Surat Masuk'
      summary: 'Guest mengajukan surat baru'
      description: 'Endpoint publik untuk mengajukan surat permohonan atau lainnya.'
      operationId: 7fcfb87072f11962ecb80c78f7b49e42
      requestBody:
        content:
          multipart/form-data:
            schema:
              required:
                - nama_pengirim
                - perihal
                - tujuan
                - jenis_surat
                - file_surat
              properties:
                nama_pengirim:
                  type: string
                  maxLength: 255
                email_pengirim:
                  type: string
                  format: email
                  maxLength: 255
                perihal:
                  type: string
                  maxLength: 255
                tujuan:
                  type: string
                asal_instansi:
                  type: string
                  maxLength: 255
                jenis_surat:
                  type: string
                  maxLength: 255
                file_surat:
                  type: string
                  format: binary
              type: object
      responses:
        201:
          description: 'Surat berhasil diajukan'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/SuratRequest'
                type: object
        422:
          description: 'Error validasi'
  '/surat-requests/{suratRequest}/assign':
    patch:
      tags:
        - 'Surat Masuk'
      summary: 'Admin/Superadmin menugaskan surat ke koordinator'
      description: "Memerlukan autentikasi dan role 'admin' atau 'superadmin'."
      operationId: bc015ad877fad2ead364a428a0d87a80
      parameters:
        -
          name: suratRequest
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              required:
                - assigned_to
              properties:
                assigned_to:
                  description: 'ID User (Koordinator Divisi)'
                  type: integer
                catatan:
                  type: string
              type: object
      responses:
        200:
          description: 'Surat berhasil ditugaskan'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/SuratRequest'
                type: object
        404:
          description: 'Surat tidak ditemukan'
        422:
          description: 'Error validasi'
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  /my-dispositions:
    get:
      tags:
        - 'Surat Masuk'
      summary: 'Koordinator melihat surat yang ditugaskan kepadanya'
      description: "Memerlukan autentikasi dan role 'koor_divisi'."
      operationId: 11a78a783a183dfcd6a161b68ab710c7
      responses:
        200:
          description: Berhasil
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/SuratDisposition'
                type: object
        401:
          description: Unauthorized
      security:
        -
          bearerAuth: []
  '/surat-dispositions/{suratDisposition}/status':
    patch:
      tags:
        - 'Surat Masuk'
      summary: 'Koordinator memperbarui status surat'
      description: "Memerlukan autentikasi dan role 'koor_divisi'."
      operationId: 586bb06ea11b2c6f1bbe90a1caa55e00
      parameters:
        -
          name: suratDisposition
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              required:
                - status
              properties:
                status:
                  type: string
                  enum:
                    - diproses
                    - selesai
                catatan:
                  type: string
              type: object
      responses:
        200:
          description: 'Status berhasil diperbarui'
          content:
            application/json:
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/SuratDisposition'
                type: object
      security:
        -
          bearerAuth: []
components:
  schemas:
    User:
      required:
        - username
        - email
        - password
        - roles
      properties:
        id:
          type: integer
          example: 1
        username:
          type: string
          maxLength: 50
          example: johndoe
        email:
          type: string
          format: email
          example: johndoe@example.com
        roles:
          type: string
          enum:
            - admin
            - superadmin
          example: admin
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      type: object
    Documentation:
      required:
        - nama
        - deskripsi
        - tanggal
        - lokasi
      properties:
        id:
          type: integer
          example: 1
        nama:
          type: string
          maxLength: 50
          example: 'Kegiatan Bakti Sosial'
        deskripsi:
          type: string
          example: 'Kegiatan sosial di desa Sukamaju.'
        tanggal:
          type: string
          format: date
          example: '2024-10-20'
        lokasi:
          type: string
          maxLength: 255
          example: 'Aula Desa Sukamaju'
        foto:
          type: string
          example: documentations/nama_file.jpg
        foto_url:
          type: string
          example: 'https://kbmk.unmul.ac.id/storage/documentations/nama_file.jpg'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      type: object
    Link:
      required:
        - nama
        - link
      properties:
        id:
          type: integer
          example: 1
        nama:
          type: string
          example: 'Google Drive KBMK'
        link:
          type: string
          format: uri
          example: 'https://drive.google.com/drive/folders/xyz'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      type: object
    Pengurus:
      required:
        - nama
        - division_id
        - deskripsi
      properties:
        id:
          type: integer
          example: 1
        nama:
          type: string
          maxLength: 50
          example: 'Nanda Arianto'
        jabatan:
          type: string
          maxLength: 100
          example: 'Ketua Umum'
        division_id:
          type: integer
          example: 2
        division:
          properties:
            id:
              type: integer
              example: 2
            nama:
              type: string
              example: Perlengkapan
            deskripsi:
              type: string
              example: 'Mengelola logistik.'
          type: object
        foto:
          type: string
          example: pengurus/nama_file.jpg
        foto_url:
          type: string
          example: 'https://kbmk.unmul.ac.id/storage/pengurus/nama_file.jpg'
        deskripsi:
          type: string
          example: 'Bertanggung jawab atas kelancaran program kerja.'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      type: object
    ProfileDesc:
      required:
        - judul
        - jenis
        - deskripsi
      properties:
        id:
          type: integer
          example: 1
        judul:
          type: string
          maxLength: 50
          example: 'Tentang Kami'
        jenis:
          type: string
          enum:
            - about
            - visi
            - misi
          example: about
        deskripsi:
          type: string
          example: 'Kami adalah organisasi yang...'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      type: object
    Schedule:
      required:
        - nama
        - tanggal
        - deskripsi
      properties:
        id:
          type: integer
          example: 1
        nama:
          type: string
          maxLength: 50
          example: 'Rapat Rutinan'
        tanggal:
          type: string
          format: date
          example: '2024-12-25'
        deskripsi:
          type: string
          example: 'Membahas agenda kegiatan bulan depan.'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      type: object
    SuratOutgoing:
      required:
        - perihal
        - tujuan
        - jenis_surat
        - file_surat
      properties:
        id:
          type: integer
          example: 1
        nomor_surat:
          type: string
          example: SK-20231120-WXYZ
        perihal:
          type: string
          example: 'Undangan Acara Maulid Nabi'
        tujuan:
          type: string
          example: 'Seluruh Civitas Akademika Fakultas Teknik'
        jenis_surat:
          type: string
          example: Undangan
        file_surat:
          type: string
          example: surat_outgoing/undangan.pdf
        dibuat_oleh:
          type: integer
          example: 2
        creator:
          $ref: '#/components/schemas/UserSimple'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      type: object
    SuratRequest:
      required:
        - nama_pengirim
        - perihal
        - tujuan
        - jenis_surat
        - file_surat
      properties:
        id:
          type: integer
          example: 1
        nomor_surat:
          type: string
          example: SR-20231120-ABCD
        nama_pengirim:
          type: string
          example: 'John Doe'
        email_pengirim:
          type: string
          format: email
          example: john@example.com
        perihal:
          type: string
          example: 'Permohonan Kerjasama'
        tujuan:
          type: string
          example: 'Divisi Humas KBMK'
        asal_instansi:
          type: string
          example: 'PT. Sejahtera'
        jenis_surat:
          type: string
          example: Kerjasama
        file_surat:
          type: string
          example: surat_requests/proposal.pdf
        status:
          type: string
          enum:
            - pending
            - diteruskan
            - diproses
            - selesai
          example: pending
        dispositions:
          type: array
          items:
            $ref: '#/components/schemas/SuratDisposition'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      type: object
    SuratDisposition:
      properties:
        id:
          type: integer
          example: 1
        surat_request_id:
          type: integer
          example: 1
        assigned_to:
          type: integer
          example: 5
        catatan:
          type: string
          example: 'Mohon segera diproses.'
        status:
          type: string
          enum:
            - 'belum dibaca'
            - diteruskan
            - diproses
            - selesai
          example: 'belum dibaca'
        assignedUser:
          $ref: '#/components/schemas/UserSimple'
        suratRequest:
          $ref: '#/components/schemas/SuratRequest'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      type: object
    UserSimple:
      description: 'Schema untuk data user yang disederhanakan, digunakan saat menampilkan user terkait.'
      properties:
        id:
          type: integer
          example: 5
        username:
          type: string
          example: koordivhumas
        email:
          type: string
          format: email
          example: koordivhumas@gmail.com
      type: object
  responses:
    403:
      description: 'Unauthorized - Bukan tugas Anda'
    404:
      description: 'Disposisi tidak ditemukan'
    422:
      description: 'Error validasi'
    401:
      description: Unauthorized
  securitySchemes:
    bearerAuth:
      type: http
      name: Authorization
      in: header
      bearerFormat: JWT
      scheme: bearer
tags:
  -
    name: Authentication
    description: Authentication
  -
    name: Auth
    description: Auth
  -
    name: Documentations
    description: Documentations
  -
    name: Link
    description: Link
  -
    name: Pengurus
    description: Pengurus
  -
    name: 'Profile Descriptions'
    description: 'Profile Descriptions'
  -
    name: Schedules
    description: Schedules
  -
    name: 'Surat Keluar'
    description: 'Surat Keluar'
  -
    name: 'Surat Masuk'
    description: 'Surat Masuk'
